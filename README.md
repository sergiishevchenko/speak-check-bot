# Телеграм бот - speak-check-bot.

## Описание функционала
Скрипт состоит из нескольких частей: бот для общения в Telegram, бот для общения в группе во Вконтакте.\
Боты используют сервис Dialogflow от Google, который отвечает на запросы с использованием обучаемой нейросети.
![Alt text](gif/tg.gif)
![Alt text](gif/vk.gif)

## Настройка и запуск
Для успешного запуска необходимо указать переменные окружения в файле `.env` в корне проекта.\
Вам понадобится указать следующие переменные:\
**TG_BOT_TOKEN** - токен бота, который вы получили от **GodfatherBot**.\
**PROJECT_ID** - id проекта в Google Cloud.\
**TG_CHAT_ID** - id пользователя, которому слать сообщения.\
**GOOGLE_APPLICATION_CREDENTIALS** - путь до файла в формате json с ключами доступа к проекту в сервисе Google Cloud.\
**VK_GROUP_TOKEN** - токен группы в VK.\
Более подробно о том, как настраиваются и извлекаются переменные окружения, можно прочитать [здесь](https://pypi.org/project/environs/) или [здесь](https://docs.djangoproject.com/en/4.1/ref/settings/).

## Как запустить проект локально?
#### Склонируйте проект
```
https://github.com/sergiishevchenko/speak-check-bot
```
Далее введите следующие команды:
```
git clone <SSH address of this repo>
cd speak_check_bot/
python3 -m myenv venv
source venv\bin\activate
pip install -r requirements.txt
python3 tg_bot.py | python3 vk_bot.py
```
Поздравляю! Вы запустили бота!

#### Обучение бота новым фразам

Для обучения новым фразам в корне репозитория нужно создать файл `questions.json` и добавить в него нужные вопросы и ответы.
Примерная структура файла:

```
{
    "Устройство на работу": {
        "questions": [
            "Как устроиться к вам на работу?",
            "Как устроиться к вам?",
            "Как работать у вас?",
            "Хочу работать у вас",
            "Возможно-ли устроиться к вам?",
            "Можно-ли мне поработать у вас?",
            "Хочу работать редактором у вас"
        ],
        "answer": "Если вы хотите устроиться к нам, напишите на почту game-of-verbs@gmail.com мини-эссе о себе и прикрепите ваше портфолио."
    },
    "Забыл пароль": {
        "questions": [
            "Не помню пароль",
            "Не могу войти",
            "Проблемы со входом",
            "Забыл пароль",
            "Забыл логин",
            "Восстановить пароль",
            "Как восстановить пароль",
            "Неправильный логин или пароль",
            "Ошибка входа",
            "Не могу войти в аккаунт"
        ],
        "answer": "Если вы не можете войти на сайт, воспользуйтесь кнопкой «Забыли пароль?» под формой входа. Вам на почту прийдёт письмо с дальнейшими инструкциями. Проверьте папку «Спам», иногда письма попадают в неё."
    },
}
```

Затем нужно зайти в папку **google_methods** запустите скрипт для обучения бота:

```
python create_intent.py
```
## Цель проекта

Код написан в учебных целях, это часть курса по созданию [чат-ботов](https://dvmn.org/modules/chat-bots/)
на сайте веб-разработчиков [Девман](https://dvmn.org/api/docs/).
